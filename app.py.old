import streamlit as st
from pymongo import MongoClient

# ==========================================
# CONFIGURACI칍N GENERAL
# ==========================================
st.set_page_config(
    page_title="Inver 2026 - Dashboard",
    page_icon="游늵",
    layout="wide",
    initial_sidebar_state="expanded"
)
# ==============================
# LIMPIEZA TOTAL INTERFAZ STREAMLIT
# ==============================

st.markdown("""
    <style>

    /* Ocultar header superior */
    header {visibility: hidden;}

    /* Ocultar men칰 hamburguesa y deploy */
    #MainMenu {visibility: hidden;}
    .stDeployButton {display: none;}

    /* Ocultar footer */
    footer {visibility: hidden;}

    /* Quitar padding superior */
    .block-container {
        padding-top: 1rem;
        padding-bottom: 2rem;
        padding-left: 3rem;
        padding-right: 3rem;
    }

    /* Eliminar espacio blanco extra */
    .stApp {
        margin-top: -70px;
    }

    </style>
""", unsafe_allow_html=True)

# ==========================================
# ESTILOS PERSONALIZADOS
# ==========================================
st.markdown("""
<style>

/* Fondo general */
.stApp {
    background-color: #f4f6f9;
}

/* Sidebar */
section[data-testid="stSidebar"] {
    background-color: #2c3e50;
}

/* Texto sidebar */
section[data-testid="stSidebar"] * {
    color: #ecf0f1 !important;
}

/* T칤tulos */
h1, h2, h3 {
    color: #2c3e50;
}

/* Botones */
.stButton>button {
    background-color: #4a90e2;
    color: white;
    border-radius: 8px;
    padding: 0.5em 1em;
    border: none;
}

.stButton>button:hover {
    background-color: #357ABD;
}

/* Cards */
.block-container {
    padding-top: 2rem;
    padding-bottom: 2rem;
}

</style>
""", unsafe_allow_html=True)

# ==========================================
# SIDEBAR MEN칔 MULTINIVEL
# ==========================================
st.sidebar.title("游늵 Inver 2026")

menu_structure = {
    "游 Dashboard General": [],
    "游늳 Fondos Renta Fija": [
        "Listado",
        "An치lisis Individual",
        "Ranking",
    ],
    "丘뒲잺 Comparador": [
        "Comparar Fondos",
        "Comparar vs Categor칤a",
    ],
    "游빑 Constructor de Cartera": [
        "Nueva Cartera",
        "Optimizaci칩n",
        "Simulaci칩n",
    ],
    "丘뙖잺 Administraci칩n": [
        "Base de Datos",
        "Logs",
    ]
}

selected_main = st.sidebar.radio(
    "Men칰 Principal",
    list(menu_structure.keys())
)

selected_sub = None

if menu_structure[selected_main]:
    selected_sub = st.sidebar.radio(
        "Opciones",
        menu_structure[selected_main]
    )

# ==========================================
# CONTENIDO PRINCIPAL
# ==========================================

st.title("Inver 2026 - Plataforma de An치lisis")

if selected_main == "游 Dashboard General":
    st.header("Resumen Global")
    col1, col2, col3 = st.columns(3)

    col1.metric("Fondos en BD", "125")
    col2.metric("Duraci칩n media", "3.2 a침os")
    col3.metric("Rentabilidad media", "2.84 %")

elif selected_main == "游늳 Fondos Renta Fija":

    if selected_sub == "Listado":
        st.header("Listado de Fondos RF")
        st.dataframe({
            "ISIN": ["LU0293294277", "FR0011387299"],
            "Nombre": ["Allianz Short", "Allianz Court Terme"],
            "Tramo": ["short", "long"],
            "Sensibilidad": ["baja", "media"]
        })

    elif selected_sub == "An치lisis Individual":
        st.header("An치lisis Individual")
        st.info("Aqu칤 ir치 el an치lisis completo del fondo")

    elif selected_sub == "Ranking":
        st.header("Ranking de Fondos")
        st.info("Ranking por Sharpe, rentabilidad, etc.")

elif selected_main == "丘뒲잺 Comparador":
    st.header("Comparador de Fondos")
    st.info("Comparador lado a lado")

elif selected_main == "游빑 Constructor de Cartera":
    st.header("Constructor de Cartera")
    st.info("Optimizaci칩n y simulaci칩n")

elif selected_main == "丘뙖잺 Administraci칩n":
    st.header("Administraci칩n")
    st.info("Control base de datos y logs")
